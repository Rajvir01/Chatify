<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand">CHATIFY</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
    </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="nav navbar-nav navbar-right">
                <li><a (click)="this.logout()" class="nav-link"><span class="glyphicon glyphicon-log-out"></span>Logout</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <div class="messaging">
        <div class="inbox_msg">
            <div class="inbox_people">
                <div class="headind_srch">
                    <div class="recent_heading">
                        <h4>{{ currentUser?.username || "Recent Chats" | uppercase }}</h4>
                    </div>
                    <a href="/add" class="btn btn-secondary btn-lg active" role="button" aria-pressed="true">Add Friend</a>
                    <div class="srch_bar">
                        <div class="input-group stylish-input-group">
                        </div>
                    </div> 
                </div>
                <div class="inbox_chat">
                    <div class="chat_list active_chat">
                        <div class="chat_people"  *ngFor="let user of conversationList" (click)="selectedConversation = user; getMessage()">
                            <div class="chat_img">
                                <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil" />
                            </div>
                            <div class="chat_ib">
                                <!-- <h5>{{ getUsers(user) }}</h5> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mesgs">
                <div class="msg_history">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item border-0" *ngFor="let message of this.messagesList" [ngClass]="{
                            'text-right': message.senderId === currentUserId,
                            'text-left': message.senderId !== currentUserId
                        }">
                         {{ message.message }}
                        </li>
                    </ul>
                    <!-- <div  class="message">
                        <div >
                            <p>{{ message.message }}</p>
                        </div>
                    </div> -->
                    <!-- <div *ngFor="let message of this.activeConversation.messages " class="message">
                        <div *ngIf="message.senderId !== currentUserId" class="incoming_msg_img">
                            <img src="https://ptetutorials.com/images/user-profile.png" alt="karan" />
                        </div>
                        
                      </div> -->
                    <!-- <div class="outgoing_msg" *ngFor="let message of this.activeConversation.messages " class="message" [ngClass]="message.senderId === '1' ? 'outgoing_msg': 'incoming_msg'">
            <div class="sent_msg">
            <p>{{ message.message }}</p>
            </div>
        </div> -->
                    <!-- <div class="incoming_msg">
            <div class="incoming_msg_img">
            <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil" />
            </div>                                                                                      
            <div class="received_msg">
            <div class="received_withd_msg">
                <p>how u doin!</p>
            </div>
            </div>
        < /div>
        <div class="outgoing_msg">
            <div class="sent_msg">
            <p>Great</p>
            </div>
        </div> -->
                </div>
                <div class="type_msg">
                    <div class="input_msg_write">
                        <input type="text" class="form-control write_msg" placeholder="Type a message" #input (keyup.enter)="newMessage($event); input.value = ''" />
                        <button class="btn msg_send_btn" type="button" (click)="newMessage(input)">
                            <i class="bi bi-send" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<router-outlet></router-outlet>